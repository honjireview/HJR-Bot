# Honji Review Bot (HJR-Bot)

Многофункциональный бот-ассистент для проекта [Honji Review](https://teletype.in/@honjireview/who), который автоматизирует процессы апелляции, создания контента и помогает редакторам в работе с правилами.

> **Примечание:** Весь код этого проекта был полностью написан и ассистирован искусственным интеллектом.

---

## English

### About The Project

HJR-Bot is a multi-functional assistant bot for the [Honji Review](https://teletype.in/@honjireview/who) project, designed to automate and streamline key community processes.

> **Note:** The code for this project was entirely written and assisted by artificial intelligence.

#### Core & Future Features

1.  **AI-Powered Appeals System (Active):**
    * A robust, multi-stage system for objectively reviewing appeals against decisions made by the Council of Editors.
    * The bot initiates a dialogue with both the applicant and the responding council members, gathering arguments and answers to clarifying questions.
    * After a 24-hour period for collecting counter-arguments, the bot compiles a complete case file and sends it to the Gemini AI for a final, impartial verdict based on the project's charter.
    * The system is resilient, using a PostgreSQL database to maintain state, ensuring no data is lost if the bot restarts.

2.  **TextCrafter (Active):**
    * A built-in tool for creating richly formatted posts for Telegram channels.
    * It allows users to create posts with photos, detailed captions, and interactive URL buttons through a simple, step-by-step dialogue.

3.  **AI Rules Assistant (Planned):**
    * A planned feature to help editors understand the project's charter and rules.
    * Editors will be able to ask the bot questions regarding the rules (e.g., "What are the criteria for a review?"), and the bot will provide answers generated by the Gemini AI based on the official project documents.

4.  **Interactive Ad Creator (Planned):**
    * A future module designed to assist in creating promotional posts.
    * The bot will guide the user through a series of questions to generate engaging and effective ad copy and visuals.

### Tech Stack & Hosting

* **Language:** Python 3.12+
* **Telegram Library:** `pyTelegramBotAPI`
* **Web Framework:** Flask + Gunicorn
* **AI:** Google Gemini API
* **Database:** PostgreSQL
* **Hosting:** The project is configured for deployment on [Railway](https://railway.app) using a `Procfile`. It operates via webhooks for efficiency and reliability.

### How to Use (For Developers)

This guide will help you set up the bot for local development or deploy your own instance.

1.  **Clone the repository:**
    ```bash
    git clone [https://github.com/honjireview/HJR-Bot.git](https://github.com/honjireview/HJR-Bot.git)
    cd HJR-Bot
    ```

2.  **Create a virtual environment and install dependencies:**
    ```bash
    python -m venv .venv
    source .venv/bin/activate
    pip install -r requirements.txt
    ```

3.  **Set up Environment Variables:**
    For the bot to function, you must provide the following environment variables. For local development, you can create a `.env` file and use a library like `python-dotenv` (already in `requirements.txt`).
    * `TELEGRAM_TOKEN`: Your bot token from @BotFather.
    * `GEMINI_API_KEY`: Your API key from Google AI Studio.
    * `DATABASE_URL`: The full connection string for your PostgreSQL database (e.g., `postgresql://user:password@host:port/dbname`).
    * `EDITORS_CHANNEL_ID`: The unique ID of the private editors' group (e.g., `-100...`).
    * `APPEALS_CHANNEL_ID`: The unique ID of the public appeals channel (e.g., `-100...`).
    * `WEBHOOK_BASE_URL`: The public URL of your Railway deployment (e.g., `hjr-bot-production.up.railway.app`).

---

## Русский

### О проекте

HJR-Bot — это многофункциональный бот-ассистент для проекта [Honji Review](https://teletype.in/@honjireview/who), созданный для автоматизации и оптимизации ключевых процессов сообщества.

> **Примечание:** Весь код этого проекта был полностью написан и ассистирован искусственным интеллектом.

#### Основные и будущие функции

1.  **Система апелляций на базе ИИ (Активно):**
    * Надежная, многоэтапная система для объективного рассмотрения апелляций на решения Совета Редакторов.
    * Бот ведет диалог как с заявителем, так и с отвечающими членами совета, собирая аргументы и ответы на уточняющие вопросы.
    * По истечении 24-часового периода для сбора контраргументов, бот формирует полное дело и передает его ИИ Gemini для вынесения финального, беспристрастного вердикта на основе устава проекта.
    * Система отказоустойчива: для хранения состояний используется база данных PostgreSQL, что гарантирует сохранность данных при перезапусках бота.

2.  **TextCrafter (Активно):**
    * Встроенный инструмент для создания постов со сложным форматированием для каналов в Telegram.
    * Позволяет пользователям в простом пошаговом диалоге создавать посты с фотографиями, подробными подписями и интерактивными URL-кнопками.

3.  **ИИ-ассистент по правилам (Планируется):**
    * Планируемая функция, которая поможет редакторам в понимании устава и правил проекта.
    * Редакторы смогут задавать боту вопросы по правилам (например, «Какие критерии у рецензии?»), а бот будет давать ответы, сгенерированные ИИ Gemini на основе официальных документов проекта.

4.  **Интерактивный создатель рекламы (Планируется):**
    * Будущий модуль, предназначенный для помощи в создании рекламных постов.
    * Бот будет проводить пользователя через серию вопросов для генерации привлекательных и эффективных рекламных текстов и материалов.

### Технологии и хостинг

* **Язык:** Python 3.12+
* **Библиотека для Telegram:** `pyTelegramBotAPI`
* **Веб-фреймворк:** Flask + Gunicorn
* **ИИ:** Google Gemini API
* **База данных:** PostgreSQL
* **Хостинг:** Проект настроен для развертывания на [Railway](https://railway.app) с использованием `Procfile`. Бот работает через вебхуки для эффективности и надежности.

### Как использовать (для разработчиков)

Это руководство поможет вам настроить бота для локальной разработки или развернуть собственную копию.

1.  **Клонируйте репозиторий:**
    ```bash
    git clone [https://github.com/honjireview/HJR-Bot.git](https://github.com/honjireview/HJR-Bot.git)
    cd HJR-Bot
    ```

2.  **Создайте виртуальное окружение и установите зависимости:**
    ```bash
    python -m venv .venv
    source .venv/bin/activate
    pip install -r requirements.txt
    ```

3.  **Настройте переменные окружения:**
    Для работы бота необходимо задать следующие переменные окружения. Для локальной разработки можно создать файл `.env` и использовать библиотеку `python-dotenv` (уже есть в `requirements.txt`).
    * `TELEGRAM_TOKEN`: Токен вашего бота от @BotFather.
    * `GEMINI_API_KEY`: Ваш API-ключ из Google AI Studio.
    * `DATABASE_URL`: Полная строка подключения к вашей базе данных PostgreSQL (например, `postgresql://user:password@host:port/dbname`).
    * `EDITORS_CHANNEL_ID`: Уникальный ID приватной группы редакторов (например, `-100...`).
    * `APPEALS_CHANNEL_ID`: Уникальный ID публичного канала для апелляций (например, `-100...`).
    * `WEBHOOK_BASE_URL`: Публичный URL вашего развертывания на Railway (например, `hjr-bot-production.up.railway.app`).

